<!DOCTYPE html>
<html>
<head>
    <title>Game Result - {{ player.nickname }}</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            background: linear-gradient(135deg, #0f5132, #198754);
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container { 
            max-width: 600px; 
            padding: 40px; 
            text-align: center; 
        }
        .result-card { 
            background: rgba(255,255,255,0.1); 
            padding: 40px; 
            border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .result-win { border: 3px solid #28a745; }
        .result-lose { border: 3px solid #dc3545; }
        .result-draw { border: 3px solid #ffc107; }
        .result-blackjack { border: 3px solid #ffd700; background: rgba(255, 215, 0, 0.1); }
        
        h1 { font-size: 2.5em; margin-bottom: 20px; }
        .win-title { color: #28a745; }
        .lose-title { color: #dc3545; }
        .draw-title { color: #ffc107; }
        .blackjack-title { color: #ffd700; }
        
        .stats { 
            margin: 30px 0; 
            font-size: 1.2em; 
        }
        .stats p { margin: 10px 0; }
        
        .payout { 
            font-size: 1.5em; 
            font-weight: bold; 
            margin: 20px 0; 
            padding: 15px; 
            border-radius: 10px;
        }
        .payout-win { background: rgba(40, 167, 69, 0.3); }
        .payout-lose { background: rgba(220, 53, 69, 0.3); }
        .payout-draw { background: rgba(255, 193, 7, 0.3); }
        
        .actions { margin-top: 30px; }
        .btn { 
            padding: 15px 30px; 
            margin: 10px; 
            border: none; 
            border-radius: 10px; 
            font-size: 18px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-primary:hover { background: #0056b3; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        .emoji { font-size: 3em; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="result-card 
            {% if result == 'blackjack' %}result-blackjack
            {% elif result == 'win' %}result-win
            {% elif result == 'lose' %}result-lose
            {% else %}result-draw{% endif %}">
            
            <!-- Result Title -->
            {% if result == 'blackjack' %}
                <div class="emoji">üé∞‚ú®</div>
                <h1 class="blackjack-title">BLACKJACK!</h1>
                <p>Perfect 21! Amazing!</p>
            {% elif result == 'win' or game_state.result == 'win' %}
                <div class="emoji">üéâüèÜ</div>
                <h1 class="win-title">YOU WIN!</h1>
                <p>Congratulations!</p>
            {% elif result == 'lose' or game_state.result == 'lose' %}
                <div class="emoji">üòûüí∏</div>
                <h1 class="lose-title">You Lose</h1>
                <p>Better luck next time!</p>
            {% else %}
                <div class="emoji">ü§ùüí∞</div>
                <h1 class="draw-title">Push (Draw)</h1>
                <p>It's a tie!</p>
            {% endif %}

            <!-- Game Stats -->
            <div class="stats">
                {% if game_state %}
                    <p><strong>Your Total:</strong> {{ game_state.player_total }}</p>
                    {% if game_state.dealer_total %}
                        <p><strong>Dealer Total:</strong> {{ game_state.dealer_total }}</p>
                    {% endif %}
                {% endif %}
                <p><strong>Bet Amount:</strong> ${{ bet_amount }}</p>
            </div>

            <!-- Payout Info -->
            <div class="payout {% if result == 'win' or result == 'blackjack' or game_state.result == 'win' %}payout-win{% elif result == 'lose' or game_state.result == 'lose' %}payout-lose{% else %}payout-draw{% endif %}">
                {% if result == 'blackjack' %}
                    üí∞ You won: ${{ payout }}
                    <br><small>(3:2 Blackjack bonus!)</small>
                {% elif result == 'win' or game_state.result == 'win' %}
                    üí∞ You won: ${{ payout }}
                {% elif result == 'lose' or game_state.result == 'lose' %}
                    üí∏ You lost: ${{ bet_amount }}
                {% else %}
                    üí∞ Bet returned: ${{ bet_amount }}
                {% endif %}
            </div>

            <!-- New Balance -->
            <div class="stats">
                <p><strong>New Balance:</strong> ${{ player.balance }}</p>
            </div>

            <!-- Actions -->
            <div class="actions">
                <a href="{% url 'play_game' player.id %}" class="btn btn-primary">üé∞ Play Again